(component
  (component $C1 (;0;)
    (import "X" (type $X (;0;) (sub resource)))
    (type (;1;) (own $X))
    (type (;2;) (func (result 1)))
    (import "f" (func $f (;0;) (type 2)))
    (export (;1;) "g" (func $f))
  )
  (component $C2 (;1;)
    (type (;0;)
      (component
        (import "X" (type (;0;) (sub resource)))
        (type (;1;) (own 0))
        (type (;2;) (func (result 1)))
        (import "f" (func (;0;) (type 2)))
        (type (;3;) (own 0))
        (type (;4;) (func (result 3)))
        (export (;1;) "g" (func (type 4)))
      )
    )
    (import "C1" (component (;0;) (type 0)))
  )
  (instance $c (;0;) (instantiate $C2
      (with "C1" (component $C1))
    )
  )
)