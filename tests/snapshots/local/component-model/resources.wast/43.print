(component
  (component $C1 (;0;)
    (type $X (;0;) (resource (rep i32)))
    (export $X1 (;1;) "X1" (type $X))
    (export $X2 (;2;) "X2" (type $X))
    (type (;3;) (own $X))
    (core func $f (;0;) (canon resource.drop 3))
    (type (;4;) (own $X1))
    (type (;5;) (func (param "X" 4)))
    (func (;0;) (type 5) (canon lift (core func $f)))
    (type (;6;) (own $X2))
    (type (;7;) (func (param "X" 6)))
    (func (;1;) (type 7) (canon lift (core func $f)))
    (export (;2;) "f1" (func 0))
    (export (;3;) "f2" (func 1))
  )
  (instance $c1 (;0;) (instantiate $C1))
  (component $C2 (;1;)
    (import "X" (type $X (;0;) (sub resource)))
    (type (;1;) (own $X))
    (type (;2;) (func (param "X" 1)))
    (import "f" (func (;0;) (type 2)))
  )
  (alias export $c1 "X1" (type (;0;)))
  (alias export $c1 "f1" (func (;0;)))
  (instance $c2 (;1;) (instantiate $C2
      (with "X" (type 0))
      (with "f" (func 0))
    )
  )
  (alias export $c1 "X2" (type (;1;)))
  (alias export $c1 "f2" (func (;1;)))
  (instance $c3 (;2;) (instantiate $C2
      (with "X" (type 1))
      (with "f" (func 1))
    )
  )
)