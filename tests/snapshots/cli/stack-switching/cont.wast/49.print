(module
  (rec
    (type $ft (;0;) (func (param i32 (ref null $ct)) (result i32)))
    (type $ct (;1;) (cont $ft))
  )
  (type (;2;) (func (param i32)))
  (type (;3;) (func (result i32)))
  (import "spectest" "print_i32" (func $print-i32 (;0;) (type 2)))
  (tag $swap (;0;) (type 3) (result i32))
  (export "init" (func $init))
  (elem (;0;) declare func $f $g)
  (func $init (;1;) (type 3) (result i32)
    i32.const 1
    ref.func $g
    cont.new $ct
    ref.func $f
    cont.new $ct
    resume $ct (on $swap switch)
  )
  (func $f (;2;) (type $ft) (param i32 (ref null $ct)) (result i32)
    (local $i i32) (local $nextk (ref null $ct))
    local.get 0
    local.set $i
    local.get 1
    local.set $nextk
    local.get $i
    call $print-i32
    i32.const 1
    local.get $i
    i32.add
    local.get $nextk
    switch $ct $swap
    local.set $nextk
    local.set $i
    local.get $i
    call $print-i32
    i32.const 1
    local.get $i
    i32.add
    local.get $nextk
    switch $ct $swap
    unreachable
  )
  (func $g (;3;) (type $ft) (param i32 (ref null $ct)) (result i32)
    (local $i i32) (local $nextk (ref null $ct))
    local.get 0
    local.set $i
    local.get 1
    local.set $nextk
    local.get $i
    call $print-i32
    i32.const 1
    local.get $i
    i32.add
    local.get $nextk
    switch $ct $swap
    local.set $nextk
    local.set $i
    local.get $i
    call $print-i32
    local.get $i
    return
  )
)
