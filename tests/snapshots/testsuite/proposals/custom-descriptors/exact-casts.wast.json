{
  "source_filename": "tests/testsuite/proposals/custom-descriptors/exact-casts.wast",
  "commands": [
    {
      "type": "module",
      "line": 4,
      "filename": "exact-casts.0.wasm",
      "module_type": "binary"
    },
    {
      "type": "assert_return",
      "line": 170,
      "action": {
        "type": "invoke",
        "field": "self-nullable",
        "args": []
      },
      "expected": [
        {
          "type": "structref"
        }
      ]
    },
    {
      "type": "assert_return",
      "line": 171,
      "action": {
        "type": "invoke",
        "field": "self-nullable-global",
        "args": []
      },
      "expected": [
        {
          "type": "structref"
        }
      ]
    },
    {
      "type": "assert_return",
      "line": 172,
      "action": {
        "type": "invoke",
        "field": "self-nullable-call",
        "args": []
      },
      "expected": [
        {
          "type": "structref"
        }
      ]
    },
    {
      "type": "assert_return",
      "line": 173,
      "action": {
        "type": "invoke",
        "field": "self-nullable-null",
        "args": []
      },
      "expected": [
        {
          "type": "nullref"
        }
      ]
    },
    {
      "type": "assert_return",
      "line": 175,
      "action": {
        "type": "invoke",
        "field": "self-nonnullable",
        "args": []
      },
      "expected": [
        {
          "type": "structref"
        }
      ]
    },
    {
      "type": "assert_return",
      "line": 176,
      "action": {
        "type": "invoke",
        "field": "self-nonnullable-global",
        "args": []
      },
      "expected": [
        {
          "type": "structref"
        }
      ]
    },
    {
      "type": "assert_return",
      "line": 177,
      "action": {
        "type": "invoke",
        "field": "self-nonnullable-call",
        "args": []
      },
      "expected": [
        {
          "type": "structref"
        }
      ]
    },
    {
      "type": "assert_trap",
      "line": 178,
      "action": {
        "type": "invoke",
        "field": "self-nonnullable-null",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 180,
      "action": {
        "type": "invoke",
        "field": "sub-nullable",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 181,
      "action": {
        "type": "invoke",
        "field": "sub-nullable-global",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 182,
      "action": {
        "type": "invoke",
        "field": "sub-nullable-call",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_return",
      "line": 183,
      "action": {
        "type": "invoke",
        "field": "sub-nullable-null",
        "args": []
      },
      "expected": [
        {
          "type": "nullref"
        }
      ]
    },
    {
      "type": "assert_trap",
      "line": 185,
      "action": {
        "type": "invoke",
        "field": "sub-nonnullable",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 186,
      "action": {
        "type": "invoke",
        "field": "sub-nonnullable-global",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 187,
      "action": {
        "type": "invoke",
        "field": "sub-nonnullable-call",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 188,
      "action": {
        "type": "invoke",
        "field": "sub-nonnullable-null",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 190,
      "action": {
        "type": "invoke",
        "field": "super-nullable",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 191,
      "action": {
        "type": "invoke",
        "field": "super-nullable-global",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 192,
      "action": {
        "type": "invoke",
        "field": "super-nullable-call",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_return",
      "line": 193,
      "action": {
        "type": "invoke",
        "field": "super-nullable-null",
        "args": []
      },
      "expected": [
        {
          "type": "nullref"
        }
      ]
    },
    {
      "type": "assert_trap",
      "line": 195,
      "action": {
        "type": "invoke",
        "field": "super-nonnullable",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 196,
      "action": {
        "type": "invoke",
        "field": "super-nonnullable-global",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 197,
      "action": {
        "type": "invoke",
        "field": "super-nonnullable-call",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 198,
      "action": {
        "type": "invoke",
        "field": "super-nonnullable-null",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_return",
      "line": 200,
      "action": {
        "type": "invoke",
        "field": "yes-br-on-cast-val",
        "args": []
      },
      "expected": []
    },
    {
      "type": "assert_return",
      "line": 201,
      "action": {
        "type": "invoke",
        "field": "no-br-on-cast-val",
        "args": []
      },
      "expected": []
    },
    {
      "type": "assert_return",
      "line": 202,
      "action": {
        "type": "invoke",
        "field": "yes-br-on-cast-null",
        "args": []
      },
      "expected": []
    },
    {
      "type": "assert_return",
      "line": 203,
      "action": {
        "type": "invoke",
        "field": "no-br-on-cast-null",
        "args": []
      },
      "expected": []
    },
    {
      "type": "assert_return",
      "line": 205,
      "action": {
        "type": "invoke",
        "field": "no-br-on-cast-fail-val",
        "args": []
      },
      "expected": []
    },
    {
      "type": "assert_return",
      "line": 206,
      "action": {
        "type": "invoke",
        "field": "yes-br-on-cast-fail-val",
        "args": []
      },
      "expected": []
    },
    {
      "type": "assert_return",
      "line": 207,
      "action": {
        "type": "invoke",
        "field": "no-br-on-cast-fail-null",
        "args": []
      },
      "expected": []
    },
    {
      "type": "assert_return",
      "line": 208,
      "action": {
        "type": "invoke",
        "field": "yes-br-on-cast-fail-null",
        "args": []
      },
      "expected": []
    },
    {
      "type": "assert_return",
      "line": 210,
      "action": {
        "type": "invoke",
        "field": "yes-ref-test-val",
        "args": []
      },
      "expected": [
        {
          "type": "i32",
          "value": "1"
        }
      ]
    },
    {
      "type": "assert_return",
      "line": 211,
      "action": {
        "type": "invoke",
        "field": "no-ref-test-val",
        "args": []
      },
      "expected": [
        {
          "type": "i32",
          "value": "0"
        }
      ]
    },
    {
      "type": "assert_return",
      "line": 212,
      "action": {
        "type": "invoke",
        "field": "yes-ref-test-null",
        "args": []
      },
      "expected": [
        {
          "type": "i32",
          "value": "1"
        }
      ]
    },
    {
      "type": "assert_return",
      "line": 213,
      "action": {
        "type": "invoke",
        "field": "no-ref-test-null",
        "args": []
      },
      "expected": [
        {
          "type": "i32",
          "value": "0"
        }
      ]
    },
    {
      "type": "module",
      "line": 216,
      "filename": "exact-casts.1.wasm",
      "module_type": "binary"
    },
    {
      "type": "assert_return",
      "line": 382,
      "action": {
        "type": "invoke",
        "field": "self-nullable",
        "args": []
      },
      "expected": [
        {
          "type": "arrayref"
        }
      ]
    },
    {
      "type": "assert_return",
      "line": 383,
      "action": {
        "type": "invoke",
        "field": "self-nullable-global",
        "args": []
      },
      "expected": [
        {
          "type": "arrayref"
        }
      ]
    },
    {
      "type": "assert_return",
      "line": 384,
      "action": {
        "type": "invoke",
        "field": "self-nullable-call",
        "args": []
      },
      "expected": [
        {
          "type": "arrayref"
        }
      ]
    },
    {
      "type": "assert_return",
      "line": 385,
      "action": {
        "type": "invoke",
        "field": "self-nullable-null",
        "args": []
      },
      "expected": [
        {
          "type": "nullref"
        }
      ]
    },
    {
      "type": "assert_return",
      "line": 387,
      "action": {
        "type": "invoke",
        "field": "self-nonnullable",
        "args": []
      },
      "expected": [
        {
          "type": "arrayref"
        }
      ]
    },
    {
      "type": "assert_return",
      "line": 388,
      "action": {
        "type": "invoke",
        "field": "self-nonnullable-global",
        "args": []
      },
      "expected": [
        {
          "type": "arrayref"
        }
      ]
    },
    {
      "type": "assert_return",
      "line": 389,
      "action": {
        "type": "invoke",
        "field": "self-nonnullable-call",
        "args": []
      },
      "expected": [
        {
          "type": "arrayref"
        }
      ]
    },
    {
      "type": "assert_trap",
      "line": 390,
      "action": {
        "type": "invoke",
        "field": "self-nonnullable-null",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 392,
      "action": {
        "type": "invoke",
        "field": "sub-nullable",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 393,
      "action": {
        "type": "invoke",
        "field": "sub-nullable-global",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 394,
      "action": {
        "type": "invoke",
        "field": "sub-nullable-call",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_return",
      "line": 395,
      "action": {
        "type": "invoke",
        "field": "sub-nullable-null",
        "args": []
      },
      "expected": [
        {
          "type": "nullref"
        }
      ]
    },
    {
      "type": "assert_trap",
      "line": 397,
      "action": {
        "type": "invoke",
        "field": "sub-nonnullable",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 398,
      "action": {
        "type": "invoke",
        "field": "sub-nonnullable-global",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 399,
      "action": {
        "type": "invoke",
        "field": "sub-nonnullable-call",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 400,
      "action": {
        "type": "invoke",
        "field": "sub-nonnullable-null",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 402,
      "action": {
        "type": "invoke",
        "field": "super-nullable",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 403,
      "action": {
        "type": "invoke",
        "field": "super-nullable-global",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 404,
      "action": {
        "type": "invoke",
        "field": "super-nullable-call",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_return",
      "line": 405,
      "action": {
        "type": "invoke",
        "field": "super-nullable-null",
        "args": []
      },
      "expected": [
        {
          "type": "nullref"
        }
      ]
    },
    {
      "type": "assert_trap",
      "line": 407,
      "action": {
        "type": "invoke",
        "field": "super-nonnullable",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 408,
      "action": {
        "type": "invoke",
        "field": "super-nonnullable-global",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 409,
      "action": {
        "type": "invoke",
        "field": "super-nonnullable-call",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 410,
      "action": {
        "type": "invoke",
        "field": "super-nonnullable-null",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_return",
      "line": 412,
      "action": {
        "type": "invoke",
        "field": "yes-br-on-cast-val",
        "args": []
      },
      "expected": []
    },
    {
      "type": "assert_return",
      "line": 413,
      "action": {
        "type": "invoke",
        "field": "no-br-on-cast-val",
        "args": []
      },
      "expected": []
    },
    {
      "type": "assert_return",
      "line": 414,
      "action": {
        "type": "invoke",
        "field": "yes-br-on-cast-null",
        "args": []
      },
      "expected": []
    },
    {
      "type": "assert_return",
      "line": 415,
      "action": {
        "type": "invoke",
        "field": "no-br-on-cast-null",
        "args": []
      },
      "expected": []
    },
    {
      "type": "assert_return",
      "line": 417,
      "action": {
        "type": "invoke",
        "field": "no-br-on-cast-fail-val",
        "args": []
      },
      "expected": []
    },
    {
      "type": "assert_return",
      "line": 418,
      "action": {
        "type": "invoke",
        "field": "yes-br-on-cast-fail-val",
        "args": []
      },
      "expected": []
    },
    {
      "type": "assert_return",
      "line": 419,
      "action": {
        "type": "invoke",
        "field": "no-br-on-cast-fail-null",
        "args": []
      },
      "expected": []
    },
    {
      "type": "assert_return",
      "line": 420,
      "action": {
        "type": "invoke",
        "field": "yes-br-on-cast-fail-null",
        "args": []
      },
      "expected": []
    },
    {
      "type": "assert_return",
      "line": 422,
      "action": {
        "type": "invoke",
        "field": "yes-ref-test-val",
        "args": []
      },
      "expected": [
        {
          "type": "i32",
          "value": "1"
        }
      ]
    },
    {
      "type": "assert_return",
      "line": 423,
      "action": {
        "type": "invoke",
        "field": "no-ref-test-val",
        "args": []
      },
      "expected": [
        {
          "type": "i32",
          "value": "0"
        }
      ]
    },
    {
      "type": "assert_return",
      "line": 424,
      "action": {
        "type": "invoke",
        "field": "yes-ref-test-null",
        "args": []
      },
      "expected": [
        {
          "type": "i32",
          "value": "1"
        }
      ]
    },
    {
      "type": "assert_return",
      "line": 425,
      "action": {
        "type": "invoke",
        "field": "no-ref-test-null",
        "args": []
      },
      "expected": [
        {
          "type": "i32",
          "value": "0"
        }
      ]
    },
    {
      "type": "module",
      "line": 428,
      "filename": "exact-casts.2.wasm",
      "module_type": "binary"
    },
    {
      "type": "assert_return",
      "line": 594,
      "action": {
        "type": "invoke",
        "field": "self-nullable",
        "args": []
      },
      "expected": [
        {
          "type": "funcref"
        }
      ]
    },
    {
      "type": "assert_return",
      "line": 595,
      "action": {
        "type": "invoke",
        "field": "self-nullable-global",
        "args": []
      },
      "expected": [
        {
          "type": "funcref"
        }
      ]
    },
    {
      "type": "assert_return",
      "line": 596,
      "action": {
        "type": "invoke",
        "field": "self-nullable-call",
        "args": []
      },
      "expected": [
        {
          "type": "funcref"
        }
      ]
    },
    {
      "type": "assert_return",
      "line": 597,
      "action": {
        "type": "invoke",
        "field": "self-nullable-null",
        "args": []
      },
      "expected": [
        {
          "type": "nullfuncref"
        }
      ]
    },
    {
      "type": "assert_return",
      "line": 599,
      "action": {
        "type": "invoke",
        "field": "self-nonnullable",
        "args": []
      },
      "expected": [
        {
          "type": "funcref"
        }
      ]
    },
    {
      "type": "assert_return",
      "line": 600,
      "action": {
        "type": "invoke",
        "field": "self-nonnullable-global",
        "args": []
      },
      "expected": [
        {
          "type": "funcref"
        }
      ]
    },
    {
      "type": "assert_return",
      "line": 601,
      "action": {
        "type": "invoke",
        "field": "self-nonnullable-call",
        "args": []
      },
      "expected": [
        {
          "type": "funcref"
        }
      ]
    },
    {
      "type": "assert_trap",
      "line": 602,
      "action": {
        "type": "invoke",
        "field": "self-nonnullable-null",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 604,
      "action": {
        "type": "invoke",
        "field": "sub-nullable",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 605,
      "action": {
        "type": "invoke",
        "field": "sub-nullable-global",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 606,
      "action": {
        "type": "invoke",
        "field": "sub-nullable-call",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_return",
      "line": 607,
      "action": {
        "type": "invoke",
        "field": "sub-nullable-null",
        "args": []
      },
      "expected": [
        {
          "type": "nullfuncref"
        }
      ]
    },
    {
      "type": "assert_trap",
      "line": 609,
      "action": {
        "type": "invoke",
        "field": "sub-nonnullable",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 610,
      "action": {
        "type": "invoke",
        "field": "sub-nonnullable-global",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 611,
      "action": {
        "type": "invoke",
        "field": "sub-nonnullable-call",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 612,
      "action": {
        "type": "invoke",
        "field": "sub-nonnullable-null",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 614,
      "action": {
        "type": "invoke",
        "field": "super-nullable",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 615,
      "action": {
        "type": "invoke",
        "field": "super-nullable-global",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 616,
      "action": {
        "type": "invoke",
        "field": "super-nullable-call",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_return",
      "line": 617,
      "action": {
        "type": "invoke",
        "field": "super-nullable-null",
        "args": []
      },
      "expected": [
        {
          "type": "nullfuncref"
        }
      ]
    },
    {
      "type": "assert_trap",
      "line": 619,
      "action": {
        "type": "invoke",
        "field": "super-nonnullable",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 620,
      "action": {
        "type": "invoke",
        "field": "super-nonnullable-global",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 621,
      "action": {
        "type": "invoke",
        "field": "super-nonnullable-call",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_trap",
      "line": 622,
      "action": {
        "type": "invoke",
        "field": "super-nonnullable-null",
        "args": []
      },
      "text": "cast failure"
    },
    {
      "type": "assert_return",
      "line": 624,
      "action": {
        "type": "invoke",
        "field": "yes-br-on-cast-val",
        "args": []
      },
      "expected": []
    },
    {
      "type": "assert_return",
      "line": 625,
      "action": {
        "type": "invoke",
        "field": "no-br-on-cast-val",
        "args": []
      },
      "expected": []
    },
    {
      "type": "assert_return",
      "line": 626,
      "action": {
        "type": "invoke",
        "field": "yes-br-on-cast-null",
        "args": []
      },
      "expected": []
    },
    {
      "type": "assert_return",
      "line": 627,
      "action": {
        "type": "invoke",
        "field": "no-br-on-cast-null",
        "args": []
      },
      "expected": []
    },
    {
      "type": "assert_return",
      "line": 629,
      "action": {
        "type": "invoke",
        "field": "no-br-on-cast-fail-val",
        "args": []
      },
      "expected": []
    },
    {
      "type": "assert_return",
      "line": 630,
      "action": {
        "type": "invoke",
        "field": "yes-br-on-cast-fail-val",
        "args": []
      },
      "expected": []
    },
    {
      "type": "assert_return",
      "line": 631,
      "action": {
        "type": "invoke",
        "field": "no-br-on-cast-fail-null",
        "args": []
      },
      "expected": []
    },
    {
      "type": "assert_return",
      "line": 632,
      "action": {
        "type": "invoke",
        "field": "yes-br-on-cast-fail-null",
        "args": []
      },
      "expected": []
    },
    {
      "type": "assert_return",
      "line": 634,
      "action": {
        "type": "invoke",
        "field": "yes-ref-test-val",
        "args": []
      },
      "expected": [
        {
          "type": "i32",
          "value": "1"
        }
      ]
    },
    {
      "type": "assert_return",
      "line": 635,
      "action": {
        "type": "invoke",
        "field": "no-ref-test-val",
        "args": []
      },
      "expected": [
        {
          "type": "i32",
          "value": "0"
        }
      ]
    },
    {
      "type": "assert_return",
      "line": 636,
      "action": {
        "type": "invoke",
        "field": "yes-ref-test-null",
        "args": []
      },
      "expected": [
        {
          "type": "i32",
          "value": "1"
        }
      ]
    },
    {
      "type": "assert_return",
      "line": 637,
      "action": {
        "type": "invoke",
        "field": "no-ref-test-null",
        "args": []
      },
      "expected": [
        {
          "type": "i32",
          "value": "0"
        }
      ]
    }
  ]
}